<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>é‡å­¦ JS é«˜çº§ç¨‹åºè®¾è®¡</title>
    <link href="/2020/09/30/%E9%87%8D%E5%AD%A6-JS-%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"/>
    <url>/2020/09/30/%E9%87%8D%E5%AD%A6-JS-%E9%AB%98%E7%BA%A7%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€æœ€è¿‘æ–°å‡ºäº†ã€Šé«˜çº§ç¨‹åºè®¾è®¡ã€‹ç¬¬å››ç‰ˆï¼Œå’Œç¬¬ä¸‰ç‰ˆå·®åˆ«è¿˜æ˜¯æŒºå¤§çš„ã€‚ç¬¬ä¸‰ç‰ˆè¿˜æ˜¯å¤§å­¦åˆšæ¯•ä¸šé‚£ä¼šä¹°çš„ï¼Œæ²¡æ€ä¹ˆçœ‹ï¼Œå› ä¸ºæ¯•ä¸šåä¸€ç›´å†å†™<code>Vue</code>ç›¸å…³çš„ä¸œè¥¿ï¼Œçœ‹äº†åœ¨å·¥ä½œä¸­ä¹Ÿç”¨ä¸ä¸Šè€Œé—å¿˜ã€‚åªæ˜¯è¿™ä¸€å¹´ï¼ŒåŠ å…¥äº†æéªŒï¼Œå†™åŸç”Ÿ JS ï¼Œæ‰æœ‰ç‚¹æ„Ÿè§‰ã€‚å› ä¸ºè¦å…¼å®¹IEï¼Œåœ¨æµè§ˆå™¨å…¼å®¹æ–¹é¢å¯¼è‡´çš„ BOMï¼ŒDOMï¼Œäº‹ä»¶ï¼Œç½‘ç»œè¯·æ±‚ä¸Šçš„åŒºåˆ«ï¼Œæ‰€ä»¥è¦æ±‚èƒ½åŠ›æ£€æµ‹å’Œå®¢æˆ·ç«¯æ£€æµ‹æ–¹é¢å°±è¦åšå¾—æ¯”è¾ƒå¥½ã€‚åœ¨å®¢æˆ·ç«¯è¿½è¸ªåˆ©ç”¨åˆ°çš„å®¢æˆ·ç«¯å­˜å‚¨èƒ½åŠ›ï¼Œåœ¨æ€§èƒ½ä¸Šåˆ©ç”¨åˆ°çš„<code>Worker</code>ã€‚åœ¨é‡æ–°å›é¡¾è¿™æœ¬ä¹¦çš„æ—¶å€™ï¼Œå‘ç°è¿™è¾¹ä¹¦ä¸Šå…¶å®éƒ½æœ‰ä»‹ç»ã€‚ä»¥æ­¤è®°å½•ä¸€äº›ç‚¹ã€‚å®Œäº†æ„Ÿè§‰<code>html</code>ä¼¼ä¹æ²¡æœ‰é‚£ä¹ˆç®€å•ã€‚åé¢æƒ³ææ¸…æ¥šä¸‹è¿™ç§æ ‡è®°è¯­è¨€å’Œä»€ä¹ˆ<code>xhtml</code>,<code>xml</code>ï¼Œ<code>svg</code>éƒ½æ˜¯å•¥å…³ç³»ã€‚ä¹‹å‰åœ¨é‡å­¦å‰ç«¯çš„æ—¶å€™ï¼Œå°±å¬åˆ°<code>winter</code>è¯´å•¥å‘½åç©ºé—´å°±æ²¡æ˜ç™½ã€‚<code>html</code>å‘½åç©ºé—´æœ‰å•¥ç”¨ï¼Ÿ</p><ol><li>sri å®‰å…¨</li><li>catch with ä¼šåˆ›å»ºæ–°çš„ç¯å¢ƒå¯¹è±¡</li><li>typeOf æ“ä½œä¸€ä¸ªæ²¡æœ‰å®šä¹‰çš„å˜é‡ä¼šè¿”å› undefined</li><li>æ ‡è®°æ¸…é™¤å’Œå¼•ç”¨æ¸…é™¤åƒåœ¾å›æ”¶æœºåˆ¶</li><li>V8å¼•æ“ éšè—å…±ç”¨ç±»</li><li>document.domain å±æ€§é™åˆ¶åŠé€šä¿¡</li><li>namedItem é€šè¿‡name è·å–èŠ‚ç‚¹å¼•ç”¨</li><li>documentå¯¹è±¡ä¸Šè¿˜æš´éœ²äº†å‡ ä¸ªç‰¹æ®Šé›†åˆ document.anchors document.forms document.images document.links</li><li>å…ƒç´ æ˜¯HTMLHtmlElementçš„å®ä¾‹</li><li>createDocumentFragment æ”¯æŒä¸å¤ªå¥½</li><li>xmlå‘½åç©ºé—´</li><li>eventå¯¹è±¡ relatedTarget å±æ€§  IE fromElement toElement</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é•¿å·¥çš„é”„å¤´</title>
    <link href="/2020/08/09/%E9%95%BF%E5%B7%A5%E7%9A%84%E9%94%84%E5%A4%B4/"/>
    <url>/2020/08/09/%E9%95%BF%E5%B7%A5%E7%9A%84%E9%94%84%E5%A4%B4/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€æœ€è¿‘å…¬å¸ä¼˜åŒ–äº†ä¸€æ‹¨äººï¼Œå…¶ä¸­ä¸ä¹æœ‰èƒ½åŠ›ä¸é”™çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªåœ¨å…¬å¸å‘†äº†5å¹´çš„ã€‚æˆ‘æƒ³æˆ‘æ²¡æœ‰è¢«ä¼˜åŒ–çš„åŸå› å®Œå…¨æ˜¯å› ä¸ºç›®å‰è´Ÿè´£çš„é¡¹ç›®çº¿å¿™ä¸è¿‡æ¥ã€‚æœ‰æ´»å¹²ã€‚<br>ã€€ã€€çªç„¶è§‰å¾—æŠ€æœ¯ä¸æ˜¯å”¯ä¸€åœ¨èŒåœºçš„ç«äº‰åŠ›äº†ï¼Œæˆ–è®¸ä¸€ç›´éƒ½ä¸æ˜¯ï¼Œåªæ˜¯æˆ‘è‡ªå·±å¹¼ç¨šå¾—è§‰å¾—ã€‚<br>ã€€ã€€è¦æƒ³æ¸…æ¥šä»¥ååšä»€ä¹ˆäº†ã€‚<br>ã€€ã€€é•¿å·¥å°±æ˜¯é•¿å·¥ï¼Œé”„å¤´é”‹åˆ©ç‚¹åˆæœ‰å•¥ç”¨ï¼Œå…³é”®è¿˜æ˜¯çœ‹æ›¿è€æ¿æŒ–ä»€ä¹ˆã€‚<br>ã€€ã€€å¦‚æœèƒ½æœ‰ä¸€å¤©ï¼Œè‡ªå·±ä¹Ÿå°è¯•é›‡ä½£ä¸¤ä¸ªé•¿å·¥å§ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ BFC</title>
    <link href="/2020/07/01/%E4%BB%80%E4%B9%88%E6%98%AF-BFC/"/>
    <url>/2020/07/01/%E4%BB%80%E4%B9%88%E6%98%AF-BFC/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€æŸ¥äº†åŠå¤©èµ„æ–™ï¼Œ<code>BFC</code>ä¼¼ä¹æ˜¯<code>CSS</code>ç‹¬æœ‰çš„æ¦‚å¿µï¼Œåœ¨å…¶ä»–é¢†åŸŸæ²¡æœ‰è¿™ç§æ¦‚å¿µã€‚å†ç†è§£<code>BFC</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹<code>CSS</code>æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p><h3 id="css2-1-å¤„ç†æ¨¡å‹"><a href="#css2-1-å¤„ç†æ¨¡å‹" class="headerlink" title="css2.1 å¤„ç†æ¨¡å‹"></a>css2.1 å¤„ç†æ¨¡å‹</h3><p>ã€€ã€€åœ¨<a href="https://www.w3.org/TR/2011/REC-CSS2-20110607/intro.html#q2.0" target="_blank" rel="noopener">css2.1è§„èŒƒæ–‡æ¡£</a>é‡Œæœ‰æåˆ°ä¸€ç§ç”¨æˆ·ä»£ç†å¤„ç†<code>CSS</code>ä»£ç çš„å·¥ä½œæ¨¡å‹ã€‚</p><ol><li>è§£ææºæ–‡æ¡£å¹¶åˆ›å»ºæ–‡æ¡£æ ‘.</li><li>è¯†åˆ«ç›®æ ‡åª’ä½“ç±»å‹.ï¼ˆmediaï¼‰</li><li>æ£€ç´¢æ–‡æ¡£ç›¸å…³ç‰¹å®šç›®æ ‡åª’ä½“ç±»å‹çš„æ‰€æœ‰æ ·å¼è¡¨</li><li>é€šè¿‡ç»™æ¯ä¸ªé€‚ç”¨äºç›®æ ‡åª’ä½“ç±»å‹çš„å±æ€§èµ‹å€¼æ¥ä¸ºæ–‡æ¡£æ ‘ä¸­çš„å…ƒç´ åšæ ‡æ³¨ã€‚æ ¹æ®å±‚å ä¸ç»§æ‰¿ä¸­æè¿°çš„æœºåˆ¶æ¥å¯¹å±æ€§èµ‹å€¼<br>å€¼çš„è®¡ç®—éƒ¨åˆ†å–å†³äºé€‚ç”¨äºç›®æ ‡åª’ä½“ç±»å‹çš„æ ¼å¼åŒ–ç®—æ³•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç›®æ ‡åª’ä½“æ˜¯screenï¼Œç”¨æˆ·ä»£ç†ä¼šåº”ç”¨<strong>è§†è§‰æ ¼å¼åŒ–æ¨¡å‹</strong></li><li>æ ¹æ®æœ‰æ ‡æ³¨çš„æ–‡æ¡£æ ‘ï¼Œç”Ÿæˆæ ¼å¼åŒ–ç»“æ„ã€‚ï¼ˆDOM + CSSOMï¼‰</li><li>æŠŠæ ¼å¼åŒ–ç»“æ„ä¼ é€’ç»™ç›®æ ‡åª’ä½“ï¼ˆä¾‹å¦‚ï¼Œæ‰“å°ç»“æœï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºï¼Œæ¸²æŸ“ä¸ºå£°éŸ³ç­‰ç­‰ï¼‰  </li></ol><h3 id="è§†è§‰æ ¼å¼åŒ–æ¨¡å‹"><a href="#è§†è§‰æ ¼å¼åŒ–æ¨¡å‹" class="headerlink" title="è§†è§‰æ ¼å¼åŒ–æ¨¡å‹"></a>è§†è§‰æ ¼å¼åŒ–æ¨¡å‹</h3><p>ã€€ã€€è§†è§‰æ ¼å¼åŒ–æ¨¡å‹çš„ä½œç”¨æ˜¯å¯¹äºå¯è§†åŒ–åª’ä½“ï¼Œç”¨æˆ·ä»£ç†æ€æ ·å¤„ç†æ–‡æ¡£æ ‘ï¼ˆä¹Ÿå°±æ˜¯æµè§ˆå™¨ï¼‰ã€‚åœ¨è§†è§‰æ ¼å¼åŒ–æ¨¡å‹ä¸­ï¼Œæ–‡æ¡£æ ‘ä¸­çš„æ¯ä¸ªå…ƒç´ æ ¹æ®å…¶ç›’æ¨¡å‹ç”Ÿæˆ0ä¸ªæˆ–å¤šä¸ªç›’ã€‚è¿™äº›ç›’çš„å¸ƒå±€ç”±ï¼ˆä»¥ä¸‹å› ç´ ï¼‰æ§åˆ¶ï¼š  </p><ol><li>ç›’å°ºå¯¸ä¸ç±»å‹</li><li>å®šä½æ–¹æ¡ˆï¼ˆ<strong>å¸¸è§„æµ</strong>ï¼Œæµ®åŠ¨ä¸ç»å¯¹å®šä½ï¼‰</li><li>æ–‡æ¡£æ ‘ä¸­å…ƒç´ é—´çš„å…³ç³»</li><li>å¤–éƒ¨ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œè§†å£å¤§å°ï¼Œå›¾ç‰‡çš„å›ºæœ‰å°ºå¯¸ç­‰ç­‰  </li></ol><h3 id="å®šä½æ–¹æ¡ˆ"><a href="#å®šä½æ–¹æ¡ˆ" class="headerlink" title="å®šä½æ–¹æ¡ˆ"></a>å®šä½æ–¹æ¡ˆ</h3><p>ã€€ã€€CSS 2.1ä¸­ï¼Œä¸€ä¸ªç›’å¯èƒ½ä¼šæ ¹æ®ä¸‰ç§å®šä½æ–¹æ¡ˆæ¥å¸ƒå±€ï¼š</p><ol><li>å¸¸è§„æµ CSS 2.1ä¸­ï¼Œå¸¸è§„æµåŒ…æ‹¬å—çº§ç›’çš„å—æ ¼å¼åŒ–ï¼ˆblock formattingï¼‰ï¼Œè¡Œå†…çº§ç›’çš„è¡Œå†…æ ¼å¼åŒ–å’Œå—çº§ä¸è¡Œå†…çº§ç›’çš„ç›¸å¯¹å®šä½</li><li>æµ®åŠ¨ åœ¨æµ®åŠ¨æ¨¡å‹ä¸­ï¼Œç›’å…ˆæ ¹æ®å¸¸è§„æµæ¥æ”¾ç½®ï¼Œç„¶åä»å¸¸è§„æµä¸­å–å‡ºæ¥å¹¶å°½å¯èƒ½è¿œåœ°å‘å·¦æˆ–å‘å³ç§»åŠ¨ã€‚å…¶å®ƒå†…å®¹å¯èƒ½æ²¿ç€æµ®åŠ¨ï¼ˆç›’ï¼‰çš„ä¸€ä¾§æ’åˆ—ï¼ˆContent may flow along the side of a floatï¼‰</li><li>ç»å¯¹å®šä½ åœ¨ç»å¯¹å®šä½æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªç›’ä¼šä»å¸¸è§„æµä¸­å…¨éƒ¨ç§»é™¤ï¼ˆå®ƒä¸ä¼šå½±å“åé¢çš„å…„å¼Ÿå…ƒç´ ï¼‰å¹¶æ ¹æ®åŒ…å«å—ç¡®å®šä½ç½®  </li></ol><h3 id="å¸¸è§„æµ"><a href="#å¸¸è§„æµ" class="headerlink" title="å¸¸è§„æµ"></a>å¸¸è§„æµ</h3><p>ã€€ã€€å¸¸è§„æµä¸­çš„ç›’å±äºä¸€ä¸ªæ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå¯èƒ½æ˜¯å—æˆ–æ˜¯è¡Œå†…ï¼ˆæ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ï¼Œä½†ä¸èƒ½ä¸¤è€…éƒ½æ˜¯ã€‚å—çº§ç›’å‚ä¸å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚è¡Œå†…çº§ç›’å‚ä¸è¡Œå†…æ ¼å¼åŒ–ä¸Šä¸‹æ–‡</p><h3 id="å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡"><a href="#å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡" class="headerlink" title="å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡"></a>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡</h3><p>ã€€ã€€å—çº§æ ¼å¼åŒ–åŒ–ä¸Šä¸‹æ–‡ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„<code>BFC</code>ã€‚<br>ã€€ã€€æµ®åŠ¨ï¼Œç»å¯¹å®šä½çš„å…ƒç´ ï¼Œéå—ç›’çš„å—å®¹å™¨ï¼ˆä¾‹å¦‚inline-blocksï¼Œtable-cellså’Œtable-captionsï¼‰ï¼Œä»¥åŠâ€™overflowâ€™ä¸ä¸ºâ€™visibleâ€™çš„å—ç›’ã€‚ä¼šä¸ºå…¶å†…å®¹å»ºç«‹æ–°çš„å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚</p><h3 id="å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹"><a href="#å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹" class="headerlink" title="å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹"></a>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„ç‰¹ç‚¹</h3><p>ã€€ã€€åœ¨ä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­ï¼Œç›’åœ¨å‚ç›´æ–¹å‘ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ï¼Œä»åŒ…å«å—çš„é¡¶éƒ¨å¼€å§‹ã€‚ä¸¤ä¸ªå…„å¼Ÿç›’ä¹‹é—´çš„å‚ç›´è·ç¦»ç”±â€™marginâ€™å±æ€§å†³å®šã€‚åŒä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­çš„ç›¸é‚»å—çº§ç›’ä¹‹é—´çš„å‚ç›´å¤–è¾¹è·ä¼šåˆå¹¶ã€‚<br>ã€€ã€€åœ¨ä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­ï¼Œæ¯ä¸ªç›’çš„å·¦å¤–è¾¹ç•Œï¼ˆleft outer edgeï¼‰æŒ¨ç€åŒ…å«å—çš„å·¦å¤–è¾¹ç•Œï¼ˆå¯¹äºä»å³å‘å·¦çš„æ ¼å¼åŒ–ï¼Œå³å¤–è¾¹ç•ŒæŒ¨ç€ï¼‰ã€‚å³ä½¿å­˜åœ¨æµ®åŠ¨ï¼Œè¿™ä¹Ÿæˆç«‹ã€‚é™¤éè¯¥ç›’å»ºç«‹äº†ä¸€ä¸ªæ–°çš„å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆè¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥ç›’è‡ªèº«å¯èƒ½ä¼šå› ä¸ºæµ®åŠ¨å˜çª„ï¼‰ã€‚</p><h3 id="ä»€ä¹ˆæ˜¯-BFC"><a href="#ä»€ä¹ˆæ˜¯-BFC" class="headerlink" title="ä»€ä¹ˆæ˜¯ BFC"></a>ä»€ä¹ˆæ˜¯ BFC</h3><p>ã€€ã€€æµè§ˆå™¨åœ¨æ¸²æŸ“çš„æ—¶å€™ï¼ŒæŒ‰ç…§ä¸€å®šçš„è§„åˆ™ï¼ˆcssè§„èŒƒï¼‰æ¥å¤„ç†ã€‚<code>BFC</code>å°±æ˜¯å…¶ä¸­ä¸€ç§ã€‚ä»…æ­¤è€Œå·²ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
      <tag>CSS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vueæºç è§£æ keep-alive</title>
    <link href="/2020/06/29/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-keep-alive/"/>
    <url>/2020/06/29/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-keep-alive/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€<code>keep-alive</code>ç»„ä»¶åº”ç”¨åœºæ™¯å°±æ˜¯ä¸ºäº†ç»„ä»¶çš„ç¼“å­˜ä¼˜åŒ–ã€‚  </p><h3 id="å…¨å±€ç»„ä»¶æ³¨å†Œ"><a href="#å…¨å±€ç»„ä»¶æ³¨å†Œ" class="headerlink" title="å…¨å±€ç»„ä»¶æ³¨å†Œ"></a>å…¨å±€ç»„ä»¶æ³¨å†Œ</h3><p>ã€€ã€€<code>keep-alive</code>å±äºå¹³å°é€šç”¨ç»„ä»¶ï¼Œæ‰€ä»¥åœ¨<code>core</code>ç›®å½•ä¸‹ã€‚åœ¨<code>initGlobalAPI</code>æ—¶å€™ï¼Œä¼šåœ¨å½“å‰<code>Vue</code>å®ä¾‹ä¸Šçš„<code>components</code>å±æ€§é‡Œæ‰©å±•ã€‚</p><pre><code class="hljs javascript">extend(Vue.options.components, builtInComponents)</code></pre><h3 id="keep-aliveç»„ä»¶"><a href="#keep-aliveç»„ä»¶" class="headerlink" title="keep-aliveç»„ä»¶"></a>keep-aliveç»„ä»¶</h3><p>ã€€ã€€å’Œ<code>transition</code>ç»„ä»¶ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼ŒæŠ½è±¡ç»„ä»¶åœ¨å»ºç«‹çˆ¶å­å…³ç³»çš„æ—¶å€™ä¼šè¢«å¿½ç•¥æ‰ã€‚</p><pre><code class="hljs javascript"><span class="hljs-comment">// lifecycleMixin</span><span class="hljs-keyword">let</span> parent = options.parent<span class="hljs-keyword">if</span> (parent &amp;&amp; !options.abstract) &#123;  <span class="hljs-keyword">while</span> (parent.$options.abstract &amp;&amp; parent.$parent) &#123;    parent = parent.$parent  &#125;  parent.$children.push(vm)&#125;vm.$parent = parent</code></pre><p>ã€€ã€€æˆ‘ä»¬å†çœ‹çœ‹æºç ã€‚</p><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;  name: <span class="hljs-string">"keep-alive"</span>,  ...   created() &#123;    <span class="hljs-comment">// åˆå§‹åŒ–ç”¨äºå­˜å‚¨ç¼“å­˜çš„ cache å¯¹è±¡</span>    <span class="hljs-keyword">this</span>.cache = <span class="hljs-built_in">Object</span>.create(<span class="hljs-literal">null</span>);    <span class="hljs-comment">// åˆå§‹åŒ–ç”¨äºå­˜å‚¨VNode keyå€¼çš„ keys æ•°ç»„</span>    <span class="hljs-keyword">this</span>.keys = [];  &#125;,  ...  render() &#123;    <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªå­å…ƒç´ çš„ vnode</span>    <span class="hljs-keyword">const</span> slot = <span class="hljs-keyword">this</span>.$slots.default;    <span class="hljs-keyword">const</span> vnode: VNode = getFirstComponentChild(slot);    <span class="hljs-keyword">const</span> componentOptions: ?VNodeComponentOptions =      vnode &amp;&amp; vnode.componentOptions;    <span class="hljs-keyword">if</span> (componentOptions) &#123;      <span class="hljs-comment">// ä»inlcudeå’Œexludeä¸­åŒ¹é…name</span>      <span class="hljs-keyword">const</span> name: ?string = getComponentName(componentOptions);      <span class="hljs-keyword">const</span> &#123; include, exclude &#125; = <span class="hljs-keyword">this</span>;      <span class="hljs-keyword">if</span> (        (include &amp;&amp; (!name || !matches(include, name))) ||        (exclude &amp;&amp; name &amp;&amp; matches(exclude, name))      ) &#123;        <span class="hljs-keyword">return</span> vnode;      &#125;      <span class="hljs-keyword">const</span> &#123; cache, keys &#125; = <span class="hljs-keyword">this</span>;      <span class="hljs-comment">// è·å–key</span>        vnode.key == <span class="hljs-literal">null</span>          ? <span class="hljs-comment">// same constructor may get registered as</span>            <span class="hljs-comment">// different local components</span>            <span class="hljs-comment">// so cid alone is not enough (#3269)</span>            componentOptions.Ctor.cid +            (componentOptions.tag ? <span class="hljs-string">`::<span class="hljs-subst">$&#123;componentOptions.tag&#125;</span>`</span> : <span class="hljs-string">""</span>)          : vnode.key;      <span class="hljs-comment">// å¦‚æœå‘½ä¸­ç¼“å­˜ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œç„¶åè°ƒæ•´keyçš„é¡ºåº</span>      <span class="hljs-keyword">if</span> (cache[key]) &#123;        vnode.componentInstance = cache[key].componentInstance;        <span class="hljs-comment">// make current key freshest</span>        remove(keys, key);        keys.push(key);      &#125;      <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å‘½ä¸­ç¼“å­˜,å°±æŠŠ vnode æ”¾è¿›ç¼“å­˜</span>      <span class="hljs-keyword">else</span> &#123;        cache[key] = vnode;        keys.push(key);        <span class="hljs-comment">// å¦‚æœé…ç½®äº† max å¹¶ä¸”ç¼“å­˜çš„é•¿åº¦è¶…è¿‡äº† this.maxï¼Œè¿˜è¦ä»ç¼“å­˜ä¸­æœ€è¿‘æ²¡æœ‰è®¿é—®çš„é‚£ä¸ªï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªã€‚</span>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.max &amp;&amp; keys.length &gt; <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.max)) &#123;          pruneCacheEntry(cache, keys[<span class="hljs-number">0</span>], keys, <span class="hljs-keyword">this</span>._vnode);        &#125;      &#125;            <span class="hljs-comment">// keepAliveæ ‡è®°ä½</span>      vnode.data.keepAlive = <span class="hljs-literal">true</span>;    &#125;    <span class="hljs-comment">// è¿”å›å½“å‰Vnode</span>    <span class="hljs-keyword">return</span> vnode || (slot &amp;&amp; slot[<span class="hljs-number">0</span>]);  &#125;&#125;;</code></pre><h3 id="LRUç¼“å­˜ç®—æ³•"><a href="#LRUç¼“å­˜ç®—æ³•" class="headerlink" title="LRUç¼“å­˜ç®—æ³•"></a>LRUç¼“å­˜ç®—æ³•</h3><p>ã€€ã€€å¸¸è§çš„ç¼“å­˜ç®—æ³•æœ‰å‡ ç§ï¼Œ<code>LRU</code>ï¼Œ <code>LFU</code>ï¼Œä»¥åŠ<code>FIFO</code>ï¼Œæ˜¾ç„¶<code>Vue</code>è¿™é‡Œä½¿ç”¨äº†<code>LRU</code>,ä½¿ç”¨äº†ä¸€ä¸ª<code>Object</code>å’Œä¸€ä¸ª<code>keys</code>,æ¥åˆ†åˆ«å­˜å‚¨ç»„ä»¶vnodeå’Œæ§åˆ¶è®¿é—®çš„<code>keys</code>ã€‚å½“è¶…è¿‡äº†<code>max</code>å±æ€§çš„æ—¶å€™ï¼Œ<code>keep-alive</code>ä¼šåˆ é™¤æ‰æœ€è¿‘ä¸æ€ä¹ˆè®¿é—®çš„é‚£ä¸ªç»„ä»¶çš„ç¼“å­˜ã€‚<br>ã€€ã€€æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ª<code>LRU</code>ç®—æ³•ã€‚å› ä¸º<code>JS</code>é‡Œçš„<code>Map</code>è¿™ç§ç»“æ„å¯ä»¥è®°ä½æ’å…¥é¡ºåºï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨äº†<code>Map</code>ã€‚ä¹Ÿæ˜¯<code>leetcode</code>çš„<a href="https://leetcode-cn.com/problems/lru-cache/" target="_blank" rel="noopener">146é¢˜</a></p><pre><code class="hljs javascript"><span class="hljs-comment">/**</span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">capacity</span></span></span><span class="hljs-comment"> */</span><span class="hljs-keyword">var</span> LRUCache = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">capacity</span>) </span>&#123;  <span class="hljs-keyword">this</span>.maxsize = capacity  <span class="hljs-keyword">this</span>.data = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>()&#125;;<span class="hljs-comment">/** </span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">key</span></span></span><span class="hljs-comment"> * <span class="hljs-doctag">@return <span class="hljs-type">&#123;number&#125;</span></span></span><span class="hljs-comment"> */</span>LRUCache.prototype.get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>&#123;  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.data.has(key)) &#123;    <span class="hljs-comment">// è®¿é—®çš„æ—¶å€™åˆ é™¤æ—§çš„ï¼Œsetä¸€ä¸ªä¸€æ ·çš„æ–°çš„</span>    <span class="hljs-keyword">let</span> value = <span class="hljs-keyword">this</span>.data.get(key)    <span class="hljs-keyword">this</span>.data.delete(key)    <span class="hljs-keyword">this</span>.data.set(key, value)    <span class="hljs-keyword">return</span> value  &#125; <span class="hljs-keyword">else</span> &#123;    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>  &#125;&#125;;<span class="hljs-comment">/** </span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> </span>key </span><span class="hljs-comment"> * <span class="hljs-doctag">@param <span class="hljs-type">&#123;number&#125;</span> <span class="hljs-variable">value</span></span></span><span class="hljs-comment"> * <span class="hljs-doctag">@return <span class="hljs-type">&#123;void&#125;</span></span></span><span class="hljs-comment"> */</span>LRUCache.prototype.put = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, value</span>) </span>&#123;  <span class="hljs-comment">// mapé‡Œæœ‰å€¼,ç›´æ¥æ›´æ–°</span>  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.data.has(key)) &#123;    <span class="hljs-keyword">this</span>.data.delete(key)    <span class="hljs-keyword">this</span>.data.set(key, value)  &#125; <span class="hljs-keyword">else</span> &#123;    <span class="hljs-comment">// mapé‡Œæ²¡æœ‰å€¼ï¼Œåˆ¤æ–­ç¼“å­˜å¤§å°</span>    <span class="hljs-comment">// åˆ é™¤æœ€å¼€å§‹çš„é‚£ä¸ªå€¼</span>    <span class="hljs-comment">// è¿™é‡Œæ¯æ¬¡ä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„è¿­ä»£å™¨</span>    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">this</span>.data.size === <span class="hljs-keyword">this</span>.maxsize) &#123;      <span class="hljs-keyword">this</span>.data.delete(<span class="hljs-keyword">this</span>.data.keys().next().value);      <span class="hljs-keyword">this</span>.data.set(key,value)    &#125; <span class="hljs-keyword">else</span> &#123;      <span class="hljs-keyword">this</span>.data.set(key, value)    &#125;  &#125;&#125;;</code></pre><h3 id="ç¼“å­˜æ¸²æŸ“"><a href="#ç¼“å­˜æ¸²æŸ“" class="headerlink" title="ç¼“å­˜æ¸²æŸ“"></a>ç¼“å­˜æ¸²æŸ“</h3><p>ã€€ã€€æˆ‘ä»¬çŸ¥é“ï¼Œç»„ä»¶ä¸€æ—¦è¢« <code>keep-alive</code> ç¼“å­˜ï¼Œé‚£ä¹ˆå†æ¬¡æ¸²æŸ“çš„æ—¶å€™å°±ä¸ä¼šæ‰§è¡Œ <code>created</code>ã€<code>mounted</code> ç­‰é’©å­å‡½æ•°ã€‚æ‰€ä»¥<code>Vue</code>æä¾›äº†<code>activated</code>å’Œ<code>deactivated</code>é’©å­ã€‚<br>ã€€ã€€åœ¨<code>patchVnode</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ‰§è¡Œ<code>prepatch</code>é’©å­ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¼šæ‰§è¡Œ<code>updateChildComponent</code>ã€‚åœ¨<code>updateChildComponent</code>ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€æ®µã€‚  </p><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (hasChildren) &#123;    vm.$slots = resolveSlots(renderChildren, parentVnode.context)    vm.$forceUpdate()  &#125;</code></pre><p>ã€€ã€€å‰é¢æˆ‘ä»¬å·²ç»åˆ†æäº†ï¼Œå¦‚æœå‘½ä¸­ç¼“å­˜ï¼Œåˆ™ç›´æ¥è¿”å›<code>vnode.componentInstance</code>,ç„¶åå¼ºåˆ¶æ›´æ–°ã€‚è¿™ä¸ªæ—¶å€™å›å†æ¬¡æ‰§è¡Œ<code>createComponent</code>æ–¹æ³•ã€‚    </p><pre><code class="hljs javascript"><span class="hljs-comment">// createComponent</span>...<span class="hljs-keyword">const</span> isReactivated = isDef(vnode.componentInstance) &amp;&amp; i.keepAlive <span class="hljs-comment">// true</span><span class="hljs-keyword">const</span> isReactivated = isDef(vnode.componentInstance) &amp;&amp; i.keepAlive    <span class="hljs-keyword">if</span> (isDef(i = i.hook) &amp;&amp; isDef(i = i.init)) &#123;      <span class="hljs-comment">// æ‰§è¡Œinité’©å­çš„æ—¶å€™ï¼Œå¦‚æœæ˜¯keep-alive åˆ™ä¸ä¼šæ‰§è¡Œ$mount</span>      <span class="hljs-comment">//   if (</span>      <span class="hljs-comment">//   vnode.componentInstance &amp;&amp;</span>      <span class="hljs-comment">//   !vnode.componentInstance._isDestroyed &amp;&amp;</span>      <span class="hljs-comment">//   vnode.data.keepAlive</span>      <span class="hljs-comment">// ) </span>      i(vnode, <span class="hljs-literal">false</span> <span class="hljs-comment">/* hydrating */</span>)    &#125;...<span class="hljs-keyword">if</span> (isTrue(isReactivated)) &#123;  <span class="hljs-comment">// ä¼šæ‰§è¡ŒreactivateComponentæ–¹æ³•</span>  <span class="hljs-comment">// æ›´æ–°insertedVnodeQueue</span>  reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm)&#125;</code></pre><p>ã€€ã€€åœ¨æ¸²æŸ“çš„æœ€åä¸€æ­¥<code>invokeInsertHook</code>çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œ<code>vnode</code>çš„<code>insert</code>é’©å­å‡½æ•°ã€‚ä¼šæ ¹æ®<code>vnode</code>çš„<code>keepAlive</code>å±æ€§æ¥æ‰§è¡Œä¸åŒçš„æ–¹æ³•</p><pre><code class="hljs javascript"><span class="hljs-keyword">if</span> (vnode.data.keepAlive) &#123;      <span class="hljs-keyword">if</span> (context._isMounted) &#123;        <span class="hljs-comment">// vue-router#1212</span>        <span class="hljs-comment">// During updates, a kept-alive component's child components may</span>        <span class="hljs-comment">// change, so directly walking the tree here may call activated hooks</span>        <span class="hljs-comment">// on incorrect children. Instead we push them into a queue which will</span>        <span class="hljs-comment">// be processed after the whole patch process ended.</span>        queueActivatedComponent(componentInstance)        <span class="hljs-comment">//  callHook(vm, 'activated') åœ¨è¿™é‡Œè§¦å‘activatedé’©å­å‡½æ•°</span>      &#125; <span class="hljs-keyword">else</span> &#123;        activateChildComponent(componentInstance, <span class="hljs-literal">true</span> <span class="hljs-comment">/* direct */</span>)      &#125;&#125;</code></pre><p>ã€€ã€€æœ‰<code>activated</code>é’©å­å‡½æ•°ï¼Œä¹Ÿå°±æœ‰å¯¹åº”çš„<code>deactivated</code>é’©å­å‡½æ•°ï¼Œå®ƒæ˜¯å‘ç”Ÿåœ¨ vnode çš„ destory é’©å­å‡½æ•°ã€‚</p><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> componentVNodeHooks = &#123;  destroy (vnode: MountedComponentVNode) &#123;    <span class="hljs-keyword">const</span> &#123; componentInstance &#125; = vnode    <span class="hljs-keyword">if</span> (!componentInstance._isDestroyed) &#123;      <span class="hljs-keyword">if</span> (!vnode.data.keepAlive) &#123;        componentInstance.$destroy()      &#125; <span class="hljs-keyword">else</span> &#123;        deactivateChildComponent(componentInstance, <span class="hljs-literal">true</span> <span class="hljs-comment">/* direct */</span>)        <span class="hljs-comment">// callHook(vm, 'deactivated') åœ¨è¿™é‡Œè§¦å‘deactivatedé’©å­å‡½æ•°</span>      &#125;    &#125;  &#125;&#125;</code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
      <tag>Vue</tag>
      
      <tag>æºç è§£æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vueæºç è§£æ transition</title>
    <link href="/2020/06/19/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-transition/"/>
    <url>/2020/06/19/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-transition/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€<code>transition</code>ç»„ä»¶æ˜¯<code>Vue</code>å†…ç½®ç»„ä»¶ã€‚æˆ‘ä»¬ä»<code>entry-runtime-with-compiler</code>è¿™ä¸ªç‰ˆæœ¬çš„<code>JS</code>è¿›è¡Œåˆ†æã€‚</p><h3 id="å†…ç½®ç»„ä»¶æ³¨å†Œ"><a href="#å†…ç½®ç»„ä»¶æ³¨å†Œ" class="headerlink" title="å†…ç½®ç»„ä»¶æ³¨å†Œ"></a>å†…ç½®ç»„ä»¶æ³¨å†Œ</h3><p>ã€€ã€€<code>transition</code>ç»„ä»¶æ˜¯å’Œå¹³å°ç›¸å…³çš„ç»„ä»¶ï¼ˆwebä¸“å±ï¼‰,æ‰€ä»¥ä¸åœ¨<code>core</code>é‡Œé¢ã€‚è€Œæ˜¯åœ¨ç›¸å…³å¹³å°<code>JS</code>é‡Œå¼•å…¥çš„ã€‚</p><pre><code class="hljs javascript"><span class="hljs-comment">// entry-runtime-with-compiler</span><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'./runtime/index'</span><span class="hljs-comment">// runtime/index </span><span class="hljs-keyword">import</span> platformComponents <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/index'</span>...<span class="hljs-comment">// åŠ è½½å¹³å°ç›¸å…³çš„ç»„ä»¶å’ŒæŒ‡ä»¤</span>extend(Vue.options.components, platformComponents)</code></pre><h3 id="transition-ç»„ä»¶"><a href="#transition-ç»„ä»¶" class="headerlink" title="transition ç»„ä»¶"></a>transition ç»„ä»¶</h3><ul><li>æˆ‘ä»¬å…ˆæ¥ä¸€ä¸ªç¤ºä¾‹<code>demo</code>ã€‚<pre><code class="hljs javascript"><span class="hljs-keyword">let</span> vm = <span class="hljs-keyword">new</span> Vue(&#123;  el: <span class="hljs-string">'#app'</span>,  template: <span class="hljs-string">'&lt;div id="demo"&gt;'</span> +  <span class="hljs-string">'&lt;button v-on:click="show = !show"&gt;'</span> +  <span class="hljs-string">'Toggle'</span> +  <span class="hljs-string">'&lt;/button&gt;'</span> +  <span class="hljs-string">'&lt;transition :appear="true" name="fade"&gt;'</span> +  <span class="hljs-string">'&lt;p v-if="show"&gt;hello&lt;/p&gt;'</span> +  <span class="hljs-string">'&lt;/transition&gt;'</span> +  <span class="hljs-string">'&lt;/div&gt;'</span>,  data() &#123;    <span class="hljs-keyword">return</span> &#123;      show: <span class="hljs-literal">true</span>    &#125;  &#125;&#125;)</code></pre></li><li>transition render<pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;  name: <span class="hljs-string">'transition'</span>,  props: transitionProps,  <span class="hljs-comment">// æŠ½è±¡ç»„ä»¶ï¼Œå’Œkeep-aliveä¸€æ ·</span>  abstract: <span class="hljs-literal">true</span>,  render (h: <span class="hljs-built_in">Function</span>) &#123;    <span class="hljs-comment">// è·å–åŒ…è£¹çš„å†…å®¹</span>    <span class="hljs-keyword">let</span> children: any = <span class="hljs-keyword">this</span>.$slots.default    <span class="hljs-keyword">if</span> (!children) &#123;      <span class="hljs-keyword">return</span>    &#125;    <span class="hljs-comment">// æŠŠæ–‡æœ¬èŠ‚ç‚¹è¿‡æ»¤æ‰</span>    children = children.filter(isNotTextNode)    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰children ç›´æ¥è¿”å›</span>    <span class="hljs-keyword">if</span> (!children.length) &#123;      <span class="hljs-keyword">return</span>    &#125;    <span class="hljs-comment">// transitionç»„ä»¶ä¸èƒ½åŒ…è£¹å¤šä¸ªï¼Œå¤šä¸ªéœ€è¦transition-group</span>    <span class="hljs-keyword">if</span> (process.env.NODE_ENV !== <span class="hljs-string">'production'</span> &amp;&amp; children.length &gt; <span class="hljs-number">1</span>) &#123;      warn(        <span class="hljs-string">'&lt;transition&gt; can only be used on a single element. Use '</span> +        <span class="hljs-string">'&lt;transition-group&gt; for lists.'</span>,        <span class="hljs-keyword">this</span>.$parent      )    &#125;    <span class="hljs-comment">// è·å–ä¼ å…¥çš„ props mode</span>    <span class="hljs-keyword">const</span> mode: string = <span class="hljs-keyword">this</span>.mode    <span class="hljs-comment">// warn invalid mode</span>    <span class="hljs-comment">// modeåªèƒ½é€‰æ‹©in-out å’Œ out-in</span>    <span class="hljs-keyword">if</span> (process.env.NODE_ENV !== <span class="hljs-string">'production'</span> &amp;&amp;      mode &amp;&amp; mode !== <span class="hljs-string">'in-out'</span> &amp;&amp; mode !== <span class="hljs-string">'out-in'</span>    ) &#123;      warn(        <span class="hljs-string">'invalid &lt;transition&gt; mode: '</span> + mode,        <span class="hljs-keyword">this</span>.$parent      )    &#125;    <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span>    <span class="hljs-keyword">const</span> rawChild: VNode = children[<span class="hljs-number">0</span>]    <span class="hljs-comment">// å¦‚æœ æ˜¯æ ¹èŠ‚ç‚¹ æˆ–è€…çˆ¶ç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªtransition åˆ™ç›´æ¥è¿”å›</span>    <span class="hljs-keyword">if</span> (hasParentTransition(<span class="hljs-keyword">this</span>.$vnode)) &#123;      <span class="hljs-keyword">return</span> rawChild    &#125;    <span class="hljs-comment">// å¦‚æœåŒ…è£¹çš„æ˜¯keepalive åˆ™ä¼šé€’å½’æŸ¥æ‰¾çœŸå®çš„èŠ‚ç‚¹,åœ¨è¿™ä¸ªdemoé‡Œå°±æ˜¯ pè¿™ä¸ª vnode</span>    <span class="hljs-keyword">const</span> child: ?VNode = getRealChild(rawChild)    <span class="hljs-comment">// æ²¡æœ‰åˆ™è¿”å›å½“å‰èŠ‚ç‚¹</span>    <span class="hljs-keyword">if</span> (!child) &#123;      <span class="hljs-keyword">return</span> rawChild    &#125;    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._leaving) &#123;      <span class="hljs-keyword">return</span> placeholder(h, rawChild)    &#125;    <span class="hljs-comment">// æ ¹æ®ä¸åŒçš„æƒ…å†µç”Ÿæˆä¸€ä¸ª key</span>    <span class="hljs-keyword">const</span> id: string = <span class="hljs-string">`__transition-<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>._uid&#125;</span>-`</span>    child.key = child.key == <span class="hljs-literal">null</span>      ? child.isComment        ? id + <span class="hljs-string">'comment'</span>        : id + child.tag      : isPrimitive(child.key)        ? (<span class="hljs-built_in">String</span>(child.key).indexOf(id) === <span class="hljs-number">0</span> ? child.key : id + child.key)        : child.ke    <span class="hljs-comment">// renderå‡½æ•°å…¶å®å°±åšäº†è¿™ä¹ˆä¸€ä»¶äº‹æƒ…ï¼ŒæŠŠtransitionçš„props å’Œ å‡½æ•°é’©å­ æ‰©å±•åˆ°å½“å‰ dataé‡Œçš„ transitionå±æ€§é‡Œã€‚</span>    <span class="hljs-keyword">const</span> data: <span class="hljs-built_in">Object</span> = (child.data || (child.data = &#123;&#125;)).transition = extractTransitionData(<span class="hljs-keyword">this</span>)    <span class="hljs-keyword">const</span> oldRawChild: VNode = <span class="hljs-keyword">this</span>._vnode    <span class="hljs-keyword">const</span> oldChild: VNode = getRealChild(oldRawChild)    ...    <span class="hljs-keyword">return</span> rawChild  &#125;&#125;</code></pre><h3 id="å®é™…æ§åˆ¶åŠ¨ç”»çš„åœ°æ–¹"><a href="#å®é™…æ§åˆ¶åŠ¨ç”»çš„åœ°æ–¹" class="headerlink" title="å®é™…æ§åˆ¶åŠ¨ç”»çš„åœ°æ–¹"></a>å®é™…æ§åˆ¶åŠ¨ç”»çš„åœ°æ–¹</h3>ã€€ã€€<code>Vue</code>ä¼šæ ¹æ®ä¸åŒçš„å…¥å£ï¼ŒæŒ‚è½½ä¸åŒçš„<code>pacth</code>ã€‚<pre><code class="hljs javascript"><span class="hljs-comment">// runtime/index.js</span>Vue.prototype.__patch__ = inBrowser ? patch : noop</code></pre>ã€€ã€€è€Œ<code>patch</code>ä¼šæ ¹æ®å¹³å°çš„ä¸åŒï¼ŒåŠ è½½ä¸åŒçš„<code>platformModules</code>ã€‚è€Œæˆ‘ä»¬çš„<code>transition</code>å°±å±äºå…¶ä¸­çš„ä¸€ä¸ªæ¨¡å—ã€‚<pre><code class="hljs javascript"><span class="hljs-comment">// runtime/patch.js</span><span class="hljs-keyword">import</span> platformModules <span class="hljs-keyword">from</span> <span class="hljs-string">'web/runtime/modules/index'</span><span class="hljs-keyword">const</span> modules = platformModules.concat(baseModules)<span class="hljs-comment">// runtime/modules/transition.js</span><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> inBrowser ? &#123;  <span class="hljs-comment">// create hookçš„æ—¶å€™ ä¼šæ‰§è¡Œ _enter</span>  create: _enter,  activate: _enter,  remove (vnode: VNode, <span class="hljs-attr">rm</span>: <span class="hljs-built_in">Function</span>) &#123;    <span class="hljs-comment">/* istanbul ignore else */</span>    <span class="hljs-keyword">if</span> (vnode.data.show !== <span class="hljs-literal">true</span>) &#123;      leave(vnode, rm)    &#125; <span class="hljs-keyword">else</span> &#123;      rm()    &#125;  &#125;&#125; : &#123;&#125;</code></pre>ã€€ã€€ç„¶åä¼šåˆå¹¶hooksã€‚<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> hooks = [<span class="hljs-string">'create'</span>, <span class="hljs-string">'activate'</span>, <span class="hljs-string">'update'</span>, <span class="hljs-string">'remove'</span>, <span class="hljs-string">'destroy'</span>]...<span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; hooks.length; ++i) &#123;    cbs[hooks[i]] = []    <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; modules.length; ++j) &#123;      <span class="hljs-keyword">if</span> (isDef(modules[j][hooks[i]])) &#123;        cbs[hooks[i]].push(modules[j][hooks[i]])      &#125;    &#125;  &#125;</code></pre>ã€€ã€€ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨<code>web</code>ç«¯ï¼Œæ‰§è¡Œ<code>create</code>é’©å­å‡½æ•°çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼šèµ°<code>_enterå‡½æ•°</code>ã€‚<pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enter</span> (<span class="hljs-params">vnode: VNodeWithData, toggleDisplay: ?(</span>) =&gt; <span class="hljs-title">void</span>) </span>&#123;  <span class="hljs-comment">// æ‹¿åˆ°DOMå¯¹è±¡</span>  <span class="hljs-keyword">const</span> el: any = vnode.elm  <span class="hljs-keyword">if</span> (isDef(el._leaveCb)) &#123;    el._leaveCb.cancelled = <span class="hljs-literal">true</span>    el._leaveCb()  &#125;  <span class="hljs-comment">// è‡ªå®šä¹‰åŠ¨ç”»åå­—</span>  <span class="hljs-keyword">const</span> data = resolveTransition(vnode.data.transition)  ...  <span class="hljs-comment">// æ‹¿åˆ°dataä¸Šçš„å„ç§é…ç½®</span>  <span class="hljs-keyword">const</span> &#123;    css,    type,   ...  &#125; = data  ...  <span class="hljs-comment">// è·å–appearå‚æ•°</span>  <span class="hljs-keyword">const</span> isAppear = !context._isMounted || !vnode.isRootInsert  <span class="hljs-keyword">if</span> (isAppear &amp;&amp; !appear &amp;&amp; appear !== <span class="hljs-string">''</span>) &#123;    <span class="hljs-keyword">return</span>  &#125;  <span class="hljs-comment">// æ¥ä¸‹æ¥å°±æ˜¯å„ç§æ ¹æ®é…ç½®å‚æ•°å®šä¹‰Class</span>  <span class="hljs-keyword">const</span> startClass = isAppear &amp;&amp; appearClass    ? appearClass    : enterClass  <span class="hljs-keyword">const</span> activeClass = isAppear &amp;&amp; appearActiveClass    ? appearActiveClass    : enterActiveClass  <span class="hljs-keyword">const</span> toClass = isAppear &amp;&amp; appearToClass    ? appearToClass    : enterToClass    <span class="hljs-comment">// æ‹¿åˆ°è‡ªå®šä¹‰çš„é’©å­</span>  <span class="hljs-keyword">const</span> beforeEnterHook = isAppear    ? (beforeAppear || beforeEnter)    : beforeEnter  <span class="hljs-keyword">const</span> enterHook = isAppear    ? (<span class="hljs-keyword">typeof</span> appear === <span class="hljs-string">'function'</span> ? appear : enter)    : enter  <span class="hljs-keyword">const</span> afterEnterHook = isAppear    ? (afterAppear || afterEnter)    : afterEnter  <span class="hljs-keyword">const</span> enterCancelledHook = isAppear    ? (appearCancelled || enterCancelled)    : enterCancelled    <span class="hljs-comment">// è‡ªå®šä¹‰åŠ¨ç”»æ—¶é•¿</span>  <span class="hljs-keyword">const</span> explicitEnterDuration: any = toNumber(    isObject(duration)      ? duration.enter      : duration  )  ...  <span class="hljs-keyword">const</span> expectsCSS = css !== <span class="hljs-literal">false</span> &amp;&amp; !isIE9  <span class="hljs-comment">// ç»„ä»¶è®¾è®¡ç”¨æˆ·è‡ªå·±æ§åˆ¶åŠ¨ç”»ç»“æŸAPI</span>  <span class="hljs-keyword">const</span> userWantsControl = getHookArgumentsLength(enterHook)  <span class="hljs-comment">// cbå‡½æ•°ï¼Œä¼šåœ¨åé¢insertçš„æ—¶å€™æ‰ç”¨</span>  <span class="hljs-keyword">const</span> cb = el._enterCb = once(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;    <span class="hljs-keyword">if</span> (expectsCSS) &#123;      removeTransitionClass(el, toClass)      removeTransitionClass(el, activeClass)    &#125;    <span class="hljs-keyword">if</span> (cb.cancelled) &#123;      <span class="hljs-keyword">if</span> (expectsCSS) &#123;        removeTransitionClass(el, startClass)      &#125;      enterCancelledHook &amp;&amp; enterCancelledHook(el)    &#125; <span class="hljs-keyword">else</span> &#123;      afterEnterHook &amp;&amp; afterEnterHook(el)    &#125;    el._enterCb = <span class="hljs-literal">null</span>  &#125;)  <span class="hljs-keyword">if</span> (!vnode.data.show) &#123;    <span class="hljs-comment">// æ’å…¥é’©å­å‡½æ•°insert</span>    mergeVNodeHook(vnode, <span class="hljs-string">'insert'</span>, () =&gt; &#123;      <span class="hljs-keyword">const</span> parent = el.parentNode      <span class="hljs-keyword">const</span> pendingNode = parent &amp;&amp; parent._pending &amp;&amp; parent._pending[vnode.key]      <span class="hljs-keyword">if</span> (pendingNode &amp;&amp;        pendingNode.tag === vnode.tag &amp;&amp;        pendingNode.elm._leaveCb      ) &#123;        pendingNode.elm._leaveCb()      &#125;      enterHook &amp;&amp; enterHook(el, cb)    &#125;)  &#125;  <span class="hljs-comment">// å¼€å§‹å’Œè¿›å…¥çš„åŠ¨ç”»æ§åˆ¶</span>  beforeEnterHook &amp;&amp; beforeEnterHook(el)  <span class="hljs-keyword">if</span> (expectsCSS) &#123;    addTransitionClass(el, startClass)    addTransitionClass(el, activeClass)    nextFrame(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;      removeTransitionClass(el, startClass)      <span class="hljs-keyword">if</span> (!cb.cancelled) &#123;        addTransitionClass(el, toClass)        <span class="hljs-keyword">if</span> (!userWantsControl) &#123;          <span class="hljs-keyword">if</span> (isValidDuration(explicitEnterDuration)) &#123;            setTimeout(cb, explicitEnterDuration)          &#125; <span class="hljs-keyword">else</span> &#123;            whenTransitionEnds(el, type, cb)          &#125;        &#125;      &#125;    &#125;)  &#125;</code></pre></li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>ã€€ã€€<code>leave</code>è¿‡ç¨‹å’Œ<code>enter</code>å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥çœŸæ­£æ‰§è¡ŒåŠ¨ç”»çš„æ˜¯æˆ‘ä»¬å†™çš„ CSS æˆ–è€…æ˜¯ JavaScript é’©å­å‡½æ•°ï¼Œè€Œ Vue çš„ <transition> åªæ˜¯å¸®æˆ‘ä»¬å¾ˆå¥½åœ°ç®¡ç†äº†è¿™äº› CSS çš„æ·»åŠ /åˆ é™¤ï¼Œä»¥åŠé’©å­å‡½æ•°çš„æ‰§è¡Œæ—¶æœºã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
      <tag>Vue</tag>
      
      <tag>æºç è§£æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æµè§ˆå™¨äº‹ä»¶å¾ªç¯åŠæ¶ˆæ¯é˜Ÿåˆ—</title>
    <link href="/2020/06/16/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%8F%8A%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/"/>
    <url>/2020/06/16/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%8F%8A%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€äº‹ä»¶å¾ªç¯çš„æ¦‚å¿µæ—©å°±æœ‰äº†ï¼Œåªèƒ½æ„Ÿæ…¨è‡ªå·±è§è¯†å°‘ã€‚è‡ªå·±çš„æ€è€ƒæ–¹å¼è¿˜æ˜¯åå‘ä¸Šå±‚åº”ç”¨ï¼Œè¿˜æ˜¯å¾—å¤šçœ‹çœ‹è½¯ä»¶è®¾è®¡åŸºç¡€ã€‚<br>ã€€ã€€äº‹ä»¶å¾ªç¯ç³»ç»Ÿç”±å®¿ä¸»æä¾›ï¼Œåœ¨æµè§ˆå™¨é‡Œï¼Œå‚ç…§<a href="https://html.spec.whatwg.org/#event-loops" target="_blank" rel="noopener">whatwg</a>ã€‚  </p><h3 id="ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ä»¥åŠäº‹ä»¶å¾ªç¯è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ä»¥åŠäº‹ä»¶å¾ªç¯è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ä»¥åŠäº‹ä»¶å¾ªç¯è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯ä»¥åŠäº‹ä»¶å¾ªç¯è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h3><p>ã€€ã€€æŒ‰ç…§è§„èŒƒæ¥è¯´ï¼Œå°±æ˜¯åè°ƒç”¨æˆ·æ“ä½œï¼Œè„šæœ¬ï¼Œæ¸²æŸ“ï¼Œç½‘ç»œç­‰ç­‰äº‹ä»¶çš„å¤„ç†çš„æœºåˆ¶ã€‚ä¸€ä¸ªäº‹ä»¶å¾ªç¯ç³»ç»Ÿå¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—ã€‚<br>ã€€ã€€æµè§ˆå™¨ä»æ—©æœŸçš„å•è¿›ç¨‹æ¶æ„èµ°å‘ç°åœ¨çš„å¤šè¿›ç¨‹æ¶æ„(å¤šè¿›ç¨‹ä¹‹é—´è¿›ç¨‹éš”ç¦»ï¼Œè™½ç„¶å æœ‰ç©ºé—´å˜å¤§ï¼Œä½†æ˜¯å®‰å…¨æ€§å’Œç¨³å®šæ€§ä¼šå˜é«˜)ã€‚æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ª <code>chrome</code>çš„ä»»åŠ¡ç®¡ç†å™¨ã€‚ä¼šå‘ç°ä¸€ä¸ª<code>tab</code>é¡µä¸‹ï¼Œæœ‰å¤šä¸ªè¿›ç¨‹åœ¨åŒæ—¶è¿è¡Œã€‚åŒ…å«æµè§ˆå™¨è¿›ç¨‹ã€GPUè¿›ç¨‹ã€ç½‘ç»œè¿›ç¨‹ï¼ŒéŸ³é¢‘è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹ï¼ˆæœ‰äº›æœºåˆ¶ä¼šå¤ç”¨åŒä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼‰ã€æ’ä»¶è¿›ç¨‹ç­‰ç­‰ã€‚<br>ã€€ã€€å°±æˆ‘ä»¬æµè§ˆä¸€ä¸ªç½‘é¡µè€Œè¨€ï¼Œæˆ‘ä»¬è¾“å…¥ä¸€ä¸ª<code>uri</code>ï¼Œæ¸²æŸ“è¿›ç¨‹å°±ä¼šé€šçŸ¥ç½‘ç»œè¿›ç¨‹å»ä¸‹è½½èµ„æºã€‚ä¸‹è½½å®Œæ¯•ä¹‹åå°±éœ€è¦é€šçŸ¥æ¸²æŸ“è¿›ç¨‹è¿›è¡Œæ¸²æŸ“ã€‚è€Œæµè§ˆå™¨åˆæ˜¯è¿›ç¨‹éš”ç¦»çš„ã€‚åªæœ‰æ¸²æŸ“è¿›ç¨‹ä¸€ä¸ªå•è¿›ç¨‹åœ¨å¤„ç†ä»»åŠ¡ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æœ‰ä¸€ç§æœºåˆ¶æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚ä¹Ÿå°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯ã€‚</p><h3 id="æ¶ˆæ¯é˜Ÿåˆ—åŠä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹"><a href="#æ¶ˆæ¯é˜Ÿåˆ—åŠä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—åŠä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹"></a>æ¶ˆæ¯é˜Ÿåˆ—åŠä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—çš„ç¼ºç‚¹</h3><p>ã€€ã€€å½“æµè§ˆå™¨é‡åˆ°å¯¹åº”çš„è¾“å…¥ï¼Œä¸åŒçš„è¿›ç¨‹ä¼šå‘è‡ªå·±çš„æ¶ˆæ¯é˜Ÿåˆ—æ¨é€å¯¹åº”çš„ä»»åŠ¡ã€‚ä¹Ÿä¼šé€šè¿‡è¿›ç¨‹é€šä¿¡ï¼Œå‘ä¸»çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿ<code>postTask</code>ã€‚<code>chrome</code>æºç ä¸­ï¼Œä¸ºä¸åŒçš„ä»»åŠ¡å®šä¹‰äº†ä¸åŒçš„ç±»å‹ã€‚</p><pre><code class="hljs c++"><span class="hljs-keyword">enum</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TaskType</span> :</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">char</span> &#123;  kJavascriptTimer = <span class="hljs-number">10</span>&#125;</code></pre><p>ã€€ã€€é¡µé¢çº¿ç¨‹æ‰€æœ‰æ‰§è¡Œçš„ä»»åŠ¡éƒ½æ¥è‡ªäºæ¶ˆæ¯é˜Ÿåˆ—ã€‚æ¶ˆæ¯é˜Ÿåˆ—æ˜¯â€œå…ˆè¿›å…ˆå‡ºâ€çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æ”¾å…¥é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œéœ€è¦ç­‰å¾…å‰é¢çš„ä»»åŠ¡è¢«æ‰§è¡Œå®Œï¼Œæ‰ä¼šè¢«æ‰§è¡Œã€‚äºæ˜¯ï¼Œæœ‰äº›ä»»åŠ¡çš„å®æ•ˆæ€§å°±æˆäº†é—®é¢˜ã€‚</p><h3 id="å¾®ä»»åŠ¡é˜Ÿåˆ—"><a href="#å¾®ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="å¾®ä»»åŠ¡é˜Ÿåˆ—"></a>å¾®ä»»åŠ¡é˜Ÿåˆ—</h3><p>ã€€ã€€ä¸ºäº†è§£å†³å®æ•ˆæ€§çš„é—®é¢˜ï¼Œ<code>V8</code>è®¾è®¡äº†å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚åœ¨å®ä»»åŠ¡æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ¸²æŸ“å¼•æ“å¹¶ä¸ç€æ€¥å»æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼Œè€Œæ˜¯æ‰§è¡Œå½“å‰å®ä»»åŠ¡ä¸­çš„äº§ç”Ÿçš„å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
      <tag>æµè§ˆå™¨å·¥ä½œåŸç†</tag>
      
      <tag>è®¡ç®—æœºåŸºç¡€</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HTTPåè®®ç¼“å­˜|ç”Ÿé²œé€Ÿé€’</title>
    <link href="/2020/06/12/HTTP%E5%8D%8F%E8%AE%AE%E7%BC%93%E5%AD%98%7C%E7%94%9F%E9%B2%9C%E9%80%9F%E9%80%92/"/>
    <url>/2020/06/12/HTTP%E5%8D%8F%E8%AE%AE%E7%BC%93%E5%AD%98%7C%E7%94%9F%E9%B2%9C%E9%80%9F%E9%80%92/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€<code>HTTP1.1åè®®</code>åŠ å…¥äº†ç¼“å­˜æ§åˆ¶ã€‚</p><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><p>ã€€ã€€ç¼“å­˜æ˜¯ä¸€ç§æœ‰æ•ˆçš„ç¼“è§£æœåŠ¡å™¨ç«¯å‹åŠ›ï¼Œæå‡æ€§èƒ½çš„æ‰‹æ®µã€‚HTTPå®šä¹‰äº†ä¸‰ç§æ§åˆ¶ç¼“å­˜çš„åŸºæœ¬æœºåˆ¶ï¼šæ–°é²œåº¦(Freshness)ï¼ŒéªŒè¯(Validation)å’Œå¤±æ•ˆ(Expiration)ã€‚</p><h3 id="ä¸åŒç§ç±»çš„ç¼“å­˜"><a href="#ä¸åŒç§ç±»çš„ç¼“å­˜" class="headerlink" title="ä¸åŒç§ç±»çš„ç¼“å­˜"></a>ä¸åŒç§ç±»çš„ç¼“å­˜</h3><p>ã€€ã€€ç¼“å­˜çš„ç§ç±»æœ‰å¾ˆå¤š,å…¶å¤§è‡´å¯å½’ä¸ºä¸¤ç±»ï¼šç§æœ‰ä¸å…±äº«ç¼“å­˜ã€‚ç§æœ‰ç¼“å­˜åªèƒ½ä½œç”¨å•ç‹¬çš„ç”¨æˆ·ï¼Œæ¯”å¦‚æµè§ˆå™¨ã€‚è€Œå…±äº«ç¼“å­˜å¯ä»¥è¢«å¤šä¸ªç”¨æˆ·ä½¿ç”¨ã€‚æ¯”å¦‚ä»£ç†ç¼“å­˜ï¼ŒCDN,åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ç­‰ã€‚</p><h3 id="ç”Ÿé²œé€Ÿé€’"><a href="#ç”Ÿé²œé€Ÿé€’" class="headerlink" title="ç”Ÿé²œé€Ÿé€’"></a>ç”Ÿé²œé€Ÿé€’</h3><p>ã€€ã€€æˆ‘ä»¬ç”¨ä¸€ä¸ªç”Ÿé²œé€Ÿé€’çš„ä¾‹å­æ¥æè¿°ç¼“å­˜ã€‚<br>ã€€ã€€å¤å¤©åˆ°äº†ï¼Œæˆ‘ä»¬æ‰“å¼€å†°ç®±ï¼Œæƒ³æ‰¾ç“¶å¿«ä¹æ°´ã€‚ä½†æ˜¯å‘ç°æ²¡æœ‰ï¼Œäºæ˜¯æˆ‘ä»¬å¤©çŒ«è¶…å¸‚ä¸€æ³¢ï¼Œå¤©çŒ«è¶…å¸‚ç»™æˆ‘ä»¬é€æ¥äº†ä¸€ç®±å¿«ä¹æ°´ã€‚äºæ˜¯ï¼Œå†°ç®±æˆäº†ç¼“å­˜ï¼Œæˆ‘æˆäº†æµè§ˆå™¨ï¼Œå¤©çŒ«è¶…å¸‚æˆäº†æœåŠ¡å™¨ï¼Œæ±½æ°´å°±æ˜¯èµ„æºã€‚<br><img src="/imges/%E8%B6%85%E5%B8%82.png" srcset="/img/loading.gif" alt=""><br>ã€€ã€€æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæœ‰çš„å•†å“æ˜¯æœ‰ä¿è´¨æœŸçš„ï¼ˆæ–°é²œåº¦ï¼‰ï¼Œæˆ–è€…æ˜¯å•†å®¶è‡ªå·±æ‰“åŒ…çš„å•†å“ï¼Œä½ éœ€è¦è¯¢é—®å•†å®¶æ˜¯ä¸æ˜¯æœ€æ–°çš„ã€‚ä¿è´¨æœŸè¿‡äº†ï¼ˆå¤±æ•ˆï¼‰ï¼Œä½ å¯èƒ½ä¼šæŠŠå®ƒä¸¢æ‰ï¼Œæˆ–è€…ä½ èˆä¸å¾—ä¸¢ï¼Œæƒ³ç»§ç»­åƒï¼Œäºæ˜¯é—®ä¸‹å•†å®¶ï¼Œè¿˜å¯ä»¥åƒå—ï¼Ÿï¼ˆéªŒè¯ï¼‰ã€‚åˆæˆ–è€…æœ‰äº›ä¸œè¥¿å¼€è¢‹å³é£Ÿï¼Œæ˜¯ä¸å¯ä»¥ä¿å­˜çš„ã€‚ä½ å¯ä»¥å‘ç°ï¼Œ <code>HTTPåè®®</code>ï¼Œé‡Œçš„<code>Cache-Control</code>éƒ½å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„å­—æ®µæ¥å¤„ç†è¿™äº›é—®é¢˜ã€‚<br>ã€€ã€€<code>max-age</code>å¯¹åº”ç€ä¿è´¨æœŸã€‚<code>no_store</code>å¯¹åº”ç€å¼€è¢‹å³é£Ÿï¼Œ<code>no_cache</code>ä»£è¡¨ç€ä½ ä½¿ç”¨å•†å“å‰éœ€è¦è¯¢é—®ä¸‹å•†å®¶ã€‚<code>must-revalidate</code>å¯¹åº”ç€å•†å“è¿‡æœŸåï¼Œå¿…é¡»è¯¢é—®å•†å®¶ã€‚<code>max-stale</code>å¯¹åº”ç€å•†å®¶å…è®¸ä½ åœ¨è¿‡æœŸæ—¶é—´åç»§ç»­æ¶ˆè´¹å•†å“ã€‚</p><h3 id="Cache-Controlçš„ç¼ºé™·ä»¥åŠè§£å†³æ–¹æ¡ˆ"><a href="#Cache-Controlçš„ç¼ºé™·ä»¥åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="Cache-Controlçš„ç¼ºé™·ä»¥åŠè§£å†³æ–¹æ¡ˆ"></a>Cache-Controlçš„ç¼ºé™·ä»¥åŠè§£å†³æ–¹æ¡ˆ</h3><p>ã€€ã€€æµè§ˆå™¨ç”¨â€œCache-Controlâ€åšç¼“å­˜æ§åˆ¶åªèƒ½æ˜¯åˆ·æ–°æ•°æ®ï¼Œä¸èƒ½å¾ˆå¥½åœ°åˆ©ç”¨ç¼“å­˜æ•°æ®ï¼Œåˆå› ä¸ºç¼“å­˜ä¼šå¤±æ•ˆï¼Œä½¿ç”¨å‰è¿˜å¿…é¡»è¦å»æœåŠ¡å™¨éªŒè¯æ˜¯å¦æ˜¯æœ€æ–°ç‰ˆã€‚äºæ˜¯ä½ å¿…é¡»å‘é€ä¸¤ä¸ªè¯·æ±‚ã€‚å…ˆå‘é€ä¸€ä¸ª<code>HEAD</code>è¯·æ±‚ï¼Œå¦‚æœè¿‡æœŸäº†ï¼Œå†å‘é€ä¸€ä¸ª<code>GET</code>è¯·æ±‚ã€‚  </p><p>ã€€ã€€é’ˆå¯¹è¿™ç§æƒ…å†µ,<code>HTTPåè®®</code>åŠ å…¥äº†æ¡ä»¶è¯·æ±‚ï¼Œè®©æœåŠ¡ä¹Ÿæœ‰äº†æ§åˆ¶ç¼“å­˜çš„æƒé™ã€‚å½“å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œç¼“å­˜æ£€ç´¢åˆ°å·²æœ‰ä¸€ä¸ªå¯¹åº”çš„é™ˆæ—§èµ„æºï¼ˆç¼“å­˜å‰¯æœ¬ï¼‰ï¼Œåˆ™ç¼“å­˜ä¼šå…ˆå°†æ­¤è¯·æ±‚é™„åŠ ä¸€ä¸ª<code>If-None-Match</code>å¤´ï¼Œç„¶åå‘ç»™ç›®æ ‡æœåŠ¡å™¨ï¼Œä»¥æ­¤æ¥æ£€æŸ¥è¯¥èµ„æºå‰¯æœ¬æ˜¯å¦æ˜¯ä¾ç„¶è¿˜æ˜¯ç®—æ–°é²œçš„ï¼Œè‹¥æœåŠ¡å™¨è¿”å›äº† 304 (Not Modified)ï¼ˆè¯¥å“åº”ä¸ä¼šæœ‰å¸¦æœ‰å®ä½“ä¿¡æ¯ï¼‰ï¼Œåˆ™è¡¨ç¤ºæ­¤èµ„æºå‰¯æœ¬æ˜¯æ–°é²œçš„ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¯ä»¥èŠ‚çœä¸€äº›å¸¦å®½ã€‚è‹¥æœåŠ¡å™¨é€šè¿‡ <code>If-None-Match</code> æˆ– <code>If-Modified-Since</code>åˆ¤æ–­åå‘ç°å·²è¿‡æœŸï¼Œé‚£ä¹ˆä¼šå¸¦æœ‰è¯¥èµ„æºçš„å®ä½“å†…å®¹è¿”å›ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
      <tag>æµè§ˆå™¨å·¥ä½œåŸç†</tag>
      
      <tag>HTTP åè®®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å­—ç¬¦é›† å’Œ JavaScript</title>
    <link href="/2020/06/11/%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8CJavaScript/"/>
    <url>/2020/06/11/%E5%AD%97%E7%AC%A6%E9%9B%86%E5%92%8CJavaScript/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€JavaScriptæºä»£ç æ–‡æœ¬æ”¯æŒæ‰€æœ‰çš„ <code>Unicode</code> å­—ç¬¦é›†ã€‚åœ¨ <code>ECMA262 10th</code>ä¸Šï¼Œå®šä¹‰çš„æ˜¯ <code>U+0000 to U+10FFFF</code> åŒºé—´ã€‚åœ¨æ­¤è®°å½•ä¸‹äº†è§£ <code>Unicode</code>  çš„è¿‡ç¨‹ã€‚  </p><h3 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h3><p>ã€€ã€€<code>Unicode</code> çš„å‡ºç°ï¼Œæ˜¯æƒ³è®©å…¨ä¸–ç•Œç»Ÿä¸€ä¸€å¥—å­—ç¬¦é›†ï¼ˆä¸è¿‡æœ€è¿‘ç–¯ç‹‚åœ¨å¼„Emojiï¼‰ï¼Œå½“æ—¶åœ¨åšåŒæ ·äº‹æƒ…çš„ç»„ç»‡è¿˜æœ‰ <code>UCS</code> å›¢é˜Ÿã€‚<code>Unicode</code> ä¸ºæ¯ä¸€ä¸ªå­—ç¬¦è§„å®šäº† <code>code point</code>,ä¹Ÿå°±æ˜¯ç ç‚¹ã€‚å®ƒä»0å¼€å§‹ï¼Œä¸ºæ¯ä¸ªç¬¦å·æŒ‡å®šä¸€ä¸ªç¼–å·ã€‚ä½¿ç”¨ <code>U+</code> è·Ÿåœ¨åé¢çš„åå…­è¿›åˆ¶æ•°æ¥è¡¨ç¤ºã€‚<code>U+597D</code>ï¼ŒJavaScriptå…è®¸ç›´æ¥ç”¨ç ç‚¹è¡¨ç¤ºUnicodeå­—ç¬¦ï¼Œæ¯”å¦‚ <code>\u597D</code>ã€‚<code>Unicode</code> æŒ‰åŒºé—´æ¥åˆ’åˆ†ã€‚æœ€å‰é¢çš„65536ä¸ªå­—ç¬¦ä½ï¼Œç§°ä¸ºBMPï¼Œå†™æˆ16è¿›åˆ¶å°±æ˜¯ä»<code>U+0000</code>åˆ°<code>U+FFFF</code>ã€‚æ‰€æœ‰æœ€å¸¸è§çš„å­—ç¬¦éƒ½æ”¾åœ¨è¿™ä¸ªå¹³é¢ã€‚åœ¨<code>JS</code>ä¸­ä¹Ÿæœ€å¥½åªä½¿ç”¨è¿™äº›å­—ç¬¦ã€‚</p><h3 id="UTF-8ä¸UTF-16ï¼ŒUTF-32"><a href="#UTF-8ä¸UTF-16ï¼ŒUTF-32" class="headerlink" title="UTF-8ä¸UTF-16ï¼ŒUTF-32"></a>UTF-8ä¸UTF-16ï¼ŒUTF-32</h3><p>ã€€ã€€<code>Unicode</code>åªæ˜¯è§„å®šäº†ç ç‚¹ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è§„å®šå…·ä½“çš„ç¼–ç å½¢å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€ç›´è§‚çš„å°±æ˜¯ <code>UTF-32</code>,æ¯ä¸ªç ç‚¹ä½¿ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå­—èŠ‚å†…å®¹ä¸€ä¸€å¯¹åº”ç ç‚¹ã€‚æ¯”å¦‚å­—æ¯<code>A</code> å°±æ˜¯ <code>\u0041</code>ã€‚åœ¨å†…å­˜ä¸­å°±æ˜¯<code>0x00000041</code>ã€‚è™½ç„¶è¿™ç§æ–¹å¼æŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œä½†æ˜¯å¯¹äºå¤§éƒ¨åˆ†å°äº<code>U+FFFF</code>çš„å­—èŠ‚æ¥è¯´ï¼Œæ–‡ä»¶ä¼šå¤§4å€ã€‚äºæ˜¯ <code>utf-8</code> å’Œ <code>utf-16</code> è¿™ç§å¯å˜é•¿åº¦å°±å—åˆ°äº†å¤§å®¶äº²çã€‚  </p><ul><li>utf-8<br>ã€€ã€€UTF-8æ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹æ³•ï¼Œå­—ç¬¦é•¿åº¦ä»1ä¸ªå­—èŠ‚åˆ°4ä¸ªå­—èŠ‚ä¸ç­‰ã€‚UTF-8 çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š  </li></ul><ol><li><p>å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8 ç¼–ç å’Œ ASCII ç æ˜¯ç›¸åŒçš„ã€‚  </p></li><li><p>å¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼ˆn &gt; 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n + 1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚  </p></li></ol><ul><li><p>utf-16<br>utf-16ç¼–ç åº”è¯¥æ˜¯æœ€ä¼˜ç§€äº†çš„ï¼Œå› ä¸ºåŒæ—¶ç»“åˆäº†å®šé•¿å’Œå˜é•¿ä¸¤ç§ç¼–ç æ–¹æ³•çš„ç‰¹ç‚¹ã€‚å®ƒçš„ç¼–ç è§„å¾ˆç®€å•ï¼šåŸºæœ¬å¹³é¢çš„å­—ç¬¦å ç”¨2ä¸ªå­—èŠ‚ï¼Œè¾…åŠ©å¹³é¢çš„å­—ç¬¦å ç”¨4ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥å¾ˆå¥½çš„å¹³è¡¡äº†æ—¶é—´å’Œç©ºé—´ã€‚  </p><h3 id="å­—ç¬¦é›†å’Œ-JavaScript"><a href="#å­—ç¬¦é›†å’Œ-JavaScript" class="headerlink" title="å­—ç¬¦é›†å’Œ JavaScript"></a>å­—ç¬¦é›†å’Œ JavaScript</h3><p>ã€€ã€€æ—©æœŸçš„<code>JS</code>æ˜¯é‡‡ç”¨çš„<code>UCS-2</code>ç¼–ç ï¼Œä½¿ç”¨2ä¸ªå­—èŠ‚è¡¨ç¤ºå·²ç»æœ‰ç ç‚¹çš„å­—ç¬¦ã€‚æ‰€ä»¥éšç€ <code>Unicode</code>çš„å‘å±•ï¼Œ2ä¸ªå­—èŠ‚å·²ç»ä¸è¶³ä»¥è¡¨è¾¾æ‰€æœ‰çš„ç ç‚¹ã€‚å¯¼è‡´<code>JavaScript</code>çš„å­—ç¬¦å‡½æ•°éƒ½å—åˆ°äº†å½±å“ï¼Œæ— æ³•è¿”å›æ­£ç¡®ç»“æœã€‚  </p><pre><code class="javascript"><span class="keyword">let</span> s = <span class="string">'ğ„†'</span>s.length <span class="comment">// 2</span></code></pre></li></ul><p>ã€€ã€€å¥½åœ¨ <code>ES6</code> å­—ç¬¦ä¸²å¯¹äºå­—ç¬¦è¿›è¡Œäº†åŠ å¼ºã€‚å…³äºè¶…è¿‡<code>\uFFFF</code>çš„ç ç‚¹ï¼Œå¯ä»¥è¿™æ ·è¡¨ç¤º<code>\u{1D106}</code>ã€‚ä½†æ˜¯ï¼Œä¸ºäº†ä¿æŒå…¼å®¹ï¼Œlengthå±æ€§è¿˜æ˜¯åŸæ¥çš„è¡Œä¸ºæ–¹å¼ã€‚ä¸ºäº†å¾—åˆ°å­—ç¬¦ä¸²çš„æ­£ç¡®é•¿åº¦ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼ã€‚<br>ã€€ã€€<code>Array.from(string).length</code>ã€‚  </p><p>ã€€ã€€ä¹Ÿæ–°å¢äº†å‡ ä¸ªä¸“é—¨å¤„ç†4å­—èŠ‚ç ç‚¹çš„å‡½æ•°.</p><pre><code class="javascript"><span class="built_in">String</span>.fromCodePoint()ï¼šä»Unicodeç ç‚¹è¿”å›å¯¹åº”å­—ç¬¦<span class="built_in">String</span>.prototype.codePointAt()ï¼šä»å­—ç¬¦è¿”å›å¯¹åº”çš„ç ç‚¹<span class="built_in">String</span>.prototype.at()ï¼šè¿”å›å­—ç¬¦ä¸²ç»™å®šä½ç½®çš„å­—ç¬¦</code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
      <tag>è®¡ç®—æœºåŸºç¡€</tag>
      
      <tag>ç¼–ç </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>HTTPåè®®æ˜¯ä»€ä¹ˆä»¥åŠä¸æ˜¯ä»€ä¹ˆ</title>
    <link href="/2020/06/09/HTTP%E5%8D%8F%E8%AE%AE%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E4%B8%8D%E6%98%AF%E4%BB%80%E4%B9%88/"/>
    <url>/2020/06/09/HTTP%E5%8D%8F%E8%AE%AE%E6%98%AF%E4%BB%80%E4%B9%88%E4%BB%A5%E5%8F%8A%E4%B8%8D%E6%98%AF%E4%BB%80%E4%B9%88/</url>
    
    <content type="html"><![CDATA[<h3 id="HTTPåè®®æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#HTTPåè®®æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="HTTPåè®®æ˜¯ä»€ä¹ˆï¼Ÿ"></a>HTTPåè®®æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ã€€ã€€è¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚æ˜¯ä¸€ä¸ªç”¨äºä¼ è¾“è¶…åª’ä½“æ–‡æ¡£ï¼ˆä¾‹å¦‚ HTMLï¼‰çš„<strong>åº”ç”¨å±‚</strong>åè®®ã€‚<strong>æ˜¯çº¯ç²¹çš„æ–‡æœ¬åè®®</strong>ï¼Œ<strong>å¯ä»¥åœ¨ä»»ä½•å¯é çš„ä¼ è¾“å±‚ä¸Šä½¿ç”¨</strong>ã€‚ï¼ˆ HTTP/2 åŸºäº Google çš„ SPDY åè®®ï¼ŒHTTP/3 åŸºäº Google çš„ QUIC åè®®ï¼‰ï¼Œä½†æ˜¯é€šå¸¸æ˜¯åŸºäº TCP/IP å±‚ï¼Œå¯¹ TCP åè®®æ¥è¯´ï¼ŒTCP åè®®æ˜¯ä¸€æ¡åŒå‘çš„é€šè®¯é€šé“ï¼ŒHTTP å¦‚æœå»ºç«‹åœ¨ TCP çš„åŸºç¡€ä¸Šï¼Œé‚£ä¹ˆå°±éµå¾ªRequest-Response çš„æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè®¯å¿…å®šæ˜¯ç”±ç”¨æˆ·ä»£ç†é¦–å…ˆå‘èµ·çš„ã€‚</p><p><img src="/imges/HTTP&layers.png" srcset="/img/loading.gif" alt=""><br>ã€€ã€€HTTPè¢«è®¾è®¡äº20ä¸–çºª90å¹´ä»£åˆæœŸï¼Œåœ¨æœ€å¼€å§‹è®¾è®¡çš„æ—¶å€™ï¼Œåªæ˜¯ç”¨äºä»æœåŠ¡å™¨è·å–æ–‡æ¡£ï¼Œæ‰€ä»¥åªå®šä¹‰äº† <code>GET</code> æ“ä½œï¼Œåœ¨åæ¥çš„æ—¥å­é‡Œï¼Œéšç€è®¡ç®—æœºåª’ä½“çš„æŠ€æœ¯çš„å‘å±•ï¼Œå‡ºç°äº† <code>JPEG</code>ï¼Œ<code>MP3</code> éŸ³ä¹ç­‰ï¼Œäºæ˜¯æœ‰äº† <code>HTTP/1.0</code> ã€‚  </p><p>ã€€ã€€<code>HTTP/1.0</code>å½¢å¼ä¸Šå·²ç»å’Œç°åœ¨çš„ <code>HTTP/1.1</code>å·®åˆ«ä¸å¤§äº†ã€‚  </p><ol><li>å¢åŠ äº† HEADã€POST ç­‰æ–°æ–¹æ³•ï¼›</li><li>å¢åŠ äº†å“åº”çŠ¶æ€ç ï¼Œæ ‡è®°å¯èƒ½çš„é”™è¯¯åŸå› ï¼›</li><li>å¼•å…¥äº†åè®®ç‰ˆæœ¬å·æ¦‚å¿µï¼›</li><li>å¼•å…¥äº† HTTP Headerï¼ˆå¤´éƒ¨ï¼‰çš„æ¦‚å¿µï¼Œè®© HTTP å¤„ç†è¯·æ±‚å’Œå“åº”æ›´åŠ çµæ´»ï¼›</li><li><strong>ä¼ è¾“çš„æ•°æ®</strong>ä¸å†ä»…é™äºæ–‡æœ¬ï¼ˆåªæ˜¯ä¼ è¾“çš„æ•°æ®ä¸ä»…é™äºæ–‡æœ¬ï¼‰ã€‚</li></ol><p>ã€€ã€€ä½†æ˜¯è¿™ä¸ªæ—¶å€™<code>HTTP</code>è¿˜æ˜¯ç¤¾åŒºç»´æŠ¤çš„çŠ¶æ€ï¼Œå¤§å®¶éšæ„ä¿®æ”¹ã€‚æµè§ˆå™¨å„è‡ªæœ‰å„è‡ªçš„å®ç°æ–¹å¼ï¼Œç›´åˆ°æµè§ˆå™¨å¤§æˆ˜çš„95å¹´åï¼Œ<code>HTTP</code> æ‰æ­£å¼æœ‰äº†ä¸€ä»½æ–‡æ¡£, <a href="https://tools.ietf.org/html/rfc2616" target="_blank" rel="noopener">ç¼–å·ä¸º RFC 2616</a>ã€‚</p><p>ã€€ã€€ä»ç‰ˆæœ¬å·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°<code>HTTP/1.1</code> æ˜¯å¯¹ <code>HTTP/1.0</code>çš„å°å¹…åº¦ä¿®æ­£ã€‚ä½†æ˜¯å®ƒæ˜¯ä¸€ä»½æ­£å¼çš„æ ‡å‡†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§éƒ¨åˆ†æ­£è§„çš„è½¯ä»¶ä¼šå‚è€ƒæ ‡å‡†æ¥åšä¸œè¥¿ï¼ˆæˆ‘æ²¡æœ‰è¯´IEï¼ŒçœŸçš„ï¼‰ã€‚  </p><p>ã€€ã€€HTTP/1.1 ä¸»è¦çš„å˜æ›´ç‚¹æœ‰ï¼š  </p><ol><li>å¢åŠ äº† PUTã€DELETE ç­‰æ–°çš„æ–¹æ³•ï¼›</li><li>å¢åŠ äº†ç¼“å­˜ç®¡ç†å’Œæ§åˆ¶ï¼›</li><li>æ˜ç¡®äº†è¿æ¥ç®¡ç†ï¼Œå…è®¸æŒä¹…è¿æ¥ï¼›</li><li>å…è®¸å“åº”æ•°æ®åˆ†å—ï¼ˆchunkedï¼‰ï¼Œåˆ©äºä¼ è¾“å¤§æ–‡ä»¶ï¼›</li><li>å¼ºåˆ¶è¦æ±‚ Host å¤´ï¼Œè®©äº’è”ç½‘ä¸»æœºæ‰˜ç®¡æˆä¸ºå¯èƒ½ã€‚</li></ol><p>ã€€ã€€é™¤æ­¤ä¹‹å¤–ï¼Œ<code>HTTP</code> åè®®è¿˜è§„å®šæŠ¥æ–‡å¿…é¡»æœ‰ <code>header</code>ï¼Œä½†å¯ä»¥æ²¡æœ‰ <code>body</code>ï¼Œè€Œä¸”åœ¨<code>header</code> ä¹‹åå¿…é¡»è¦æœ‰ä¸€ä¸ªâ€œç©ºè¡Œâ€ï¼Œä¹Ÿå°±æ˜¯â€œCRLFâ€ï¼Œåå…­è¿›åˆ¶çš„â€œ0D0Aâ€ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/imges/httpmessage.png" srcset="/img/loading.gif" alt=""> </p><p>ã€€ã€€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>Node</code>æ¥æ¨¡æ‹Ÿä¸‹ç”¨æˆ·ä»£ç†å·²ç»æœåŠ¡å™¨ã€‚</p><ul><li>clientç«¯<pre><code class="hljs javascript"><span class="hljs-comment">// client</span><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªTCPé“¾æ¥åï¼Œä½¿ç”¨çº¯æ–‡æœ¬ä¼ è¾“å†…å®¹ï¼Œè¿™å°±æ˜¯HTTPåè®®</span><span class="hljs-keyword">const</span> net = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>);<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transforHeader</span>(<span class="hljs-params">headers</span>) </span>&#123;    <span class="hljs-keyword">let</span> test = <span class="hljs-built_in">Object</span>.keys(headers).map(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> &#123;        <span class="hljs-keyword">return</span> key + <span class="hljs-string">': '</span> + headers[key]    &#125;).join(<span class="hljs-string">'\r\n'</span>)    <span class="hljs-keyword">return</span> test;&#125;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span>(<span class="hljs-params">option, cb1, cb2</span>) </span>&#123;    <span class="hljs-keyword">let</span> client = net.createConnection(&#123;        port: option.port || <span class="hljs-number">8080</span>    &#125;, () =&gt; &#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æœåŠ¡å™¨é“¾æ¥æˆåŠŸ'</span>)        client.write(option.method + <span class="hljs-string">' / HTTP/1.1\r\n'</span> + transforHeader(option.headers) + <span class="hljs-string">'\r\n\r\n'</span> + <span class="hljs-string">'123'</span>);    &#125;);    client.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>&#123;        <span class="hljs-built_in">console</span>.log(data)        <span class="hljs-built_in">console</span>.log(<span class="hljs-built_in">Object</span>.prototype.toString.call(data))        cb1(data.toString())        client.end();    &#125;);    client.on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥'</span>);    &#125;);    client.on(<span class="hljs-string">'error'</span>, (err) =&gt; &#123;        cb2(err)        <span class="hljs-built_in">console</span>.log(err)    &#125;)&#125;request(&#123;<span class="hljs-attr">port</span>:<span class="hljs-number">8080</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>, <span class="hljs-attr">headers</span>: &#123;<span class="hljs-string">'Host'</span>: <span class="hljs-string">'localhost:8080'</span>,<span class="hljs-string">'Accept'</span>: <span class="hljs-string">'accept-encoding: gzip, deflate, br'</span>,<span class="hljs-string">'content-length'</span>: <span class="hljs-string">'3'</span>&#125;&#125;, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cb1</span>(<span class="hljs-params">data</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(data)&#125;,<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cb2</span>(<span class="hljs-params">err</span>) </span>&#123;    <span class="hljs-built_in">console</span>.log(err)&#125;)</code></pre></li><li>serverç«¯<pre><code class="hljs javascript"><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>)<span class="hljs-keyword">let</span> httpServer = http.createServer( (req, res) =&gt; &#123;    <span class="hljs-keyword">let</span>  body = <span class="hljs-string">""</span>;    <span class="hljs-built_in">console</span>.log(req.headers)    req.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">chunk</span>) </span>&#123;      body += chunk;    &#125;);    res.writeHead(<span class="hljs-number">200</span>, &#123;<span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/plain'</span>&#125;);    res.write(<span class="hljs-string">"Hello World"</span>);    req.on(<span class="hljs-string">'end'</span>, () =&gt; &#123;       <span class="hljs-built_in">console</span>.log(body)       res.end()    &#125;) &#125;).listen(<span class="hljs-number">8080</span>);</code></pre>ã€€ã€€æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå‘ç°<code>Content-length</code> æ˜¯å¿…ä¼ çš„(échunkæ¨¡å¼)ï¼Œè€Œä¸”éœ€è¦è‡ªå·±å»è®¡ç®—ã€‚ä½†æ˜¯å¹¶æ²¡æœ‰å¦‚æ–‡æ¡£æ‰€æè¿°çš„é‚£æ ·ï¼Œå¿…é¡»æœ‰ <code>host</code> å¤´. å¯èƒ½å’Œå…·ä½“çš„<code>server</code>å®ç°æœ‰å…³ç³»ã€‚</li></ul><h3 id="HTTPåè®®ä¸æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#HTTPåè®®ä¸æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="HTTPåè®®ä¸æ˜¯ä»€ä¹ˆï¼Ÿ"></a>HTTPåè®®ä¸æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>  <code>HTTP</code>ä¸æ˜¯å•ç‹¬çš„å®ä½“ï¼Œä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒåŸºäºå¯é çš„ä¼ è¾“å±‚åè®®ï¼Œä¹Ÿæœ‰ä¸€äº›åè®®åŸºäºå®ƒã€‚<code>HTTP</code>ä¸“é—¨ç”¨æ¥åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ•°æ®ï¼Œä¸èƒ½ç”¨äºå¹¿æ’­ã€å¯»å€æˆ–è·¯ç”±ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å‰ç«¯çŸ¥è¯†</tag>
      
      <tag>æµè§ˆå™¨å·¥ä½œåŸç†</tag>
      
      <tag>HTTP åè®®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‰ç«¯ä¹‹å¤–</title>
    <link href="/2019/02/28/%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%A4%96/"/>
    <url>/2019/02/28/%E5%89%8D%E7%AB%AF%E4%B9%8B%E5%A4%96/</url>
    
    <content type="html"><![CDATA[<p>ã€€ã€€æœ€è¿‘çœ‹åˆ°é˜®ä¸€å³°è€å¸ˆåˆ†äº«çš„ä¸€ç¯‡æ–‡ç« <a href="http://rubyhacker.com/blog2/20150917.html" target="_blank" rel="noopener">å¤±ä¼ çš„è®¡ç®—æœºç§‘å­¦</a>æ·±æœ‰åŒæ„Ÿï¼Œå¦‚ä»Šè¶Šæ¥è¶Šæ ‡å‡†åŒ–çš„å¼€å‘æ–¹å¼å’Œå·¥å…·ä½¿å¾—å¼€å‘è¶Šæ¥è¶Šå®¹æ˜“ï¼Œä½ å¾ˆéš¾æƒ³è±¡ä¸€ä¸ªä½¿ç”¨<code>Vue-Cli</code>å·¥å…·çš„å‰ç«¯å¼€å‘å±…ç„¶ä¸æ˜ç™½<code>webpack</code>æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚æ›´å¥‡æ€ªçš„æ˜¯ï¼Œä»–ä»¬ä»»ç„¶èƒ½å¤Ÿå‡ºè‰²çš„å®Œæˆéœ€æ±‚ã€‚<br>è½¯ä»¶çš„å¼€å‘æˆæœ¬ç†åº”è¶Šæ¥è¶Šä½ï¼Œè½¯ä»¶å¼€å‘ä»ä¸€ä¸ªåˆ€è€•ç«ç§çš„å¹´ä»£ä¸€è·¯èµ°åˆ°ä»Šå¤©ï¼Œå‰è¾ˆä»¬æ€»ç»“å‡ºæ¥çš„ç»éªŒå’Œæ™ºæ…§å˜æˆå·¥å…·ï¼Œä»ä¸€å¼€å§‹çš„æ‹–æ‹–æ‹½æ‹½åˆ°ç°åœ¨æœºå™¨å­¦ä¹ ï¼Œå·¥å…·å·²ç»å¯ä»¥å¼ºå¤§åˆ°å¯ä»¥æ›¿ä»£å¤§éƒ¨åˆ†é‡å¤åŠ³åŠ¨çš„å·¥ç§ã€‚<br>ã€€ã€€ä½†æ˜¯é—®é¢˜å°±åœ¨è¿™é‡Œï¼Œç°åœ¨çš„å·¥å…·è¿˜ä¸å¤Ÿæˆç†Ÿã€‚<br>ã€€ã€€ä½ æ— æ³•å¿½è§†ç½‘ç»œåè®®ï¼Œæ— æ³•å¿½è§†æ€§èƒ½ï¼Œæ— æ³•å¿½è§†å®‰å…¨ã€‚<br>ã€€ã€€å¦‚æœæœ‰ä¸€å¤©ï¼Œå·¥å…·èƒ½å¤Ÿè§£å†³è¿™äº›é—®é¢˜äº†ã€‚æˆ‘ä»¬åº”è¯¥æ„Ÿè§‰åˆ°å¼€å¿ƒï¼Œå¤§å¯ä¸å¿…æ‹…å¿ƒè‡ªå·±è¢«æ›¿ä»£ã€‚<br>å› ä¸ºï¼Œå¯ä»¥è½¬è¡Œåšäº§å“ç»ç†å•Šã€‚(ï½¡ï½¥âˆ€ï½¥)ï¾‰ï¾&quot;</p>]]></content>
    
    
    
    <tags>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
